{"version":3,"sources":["../src/messages.ts"],"sourcesContent":["import { Mode } from './types'\n\nexport type MessageName =\n  | 'parseComplete'\n  | 'bindComplete'\n  | 'closeComplete'\n  | 'noData'\n  | 'portalSuspended'\n  | 'replicationStart'\n  | 'emptyQuery'\n  | 'copyDone'\n  | 'copyData'\n  | 'rowDescription'\n  | 'parameterDescription'\n  | 'parameterStatus'\n  | 'backendKeyData'\n  | 'notification'\n  | 'readyForQuery'\n  | 'commandComplete'\n  | 'dataRow'\n  | 'copyInResponse'\n  | 'copyOutResponse'\n  | 'authenticationOk'\n  | 'authenticationMD5Password'\n  | 'authenticationCleartextPassword'\n  | 'authenticationSASL'\n  | 'authenticationSASLContinue'\n  | 'authenticationSASLFinal'\n  | 'error'\n  | 'notice'\n\nexport type BackendMessage = {\n  name: MessageName\n  length: number\n}\n\nexport const parseComplete: BackendMessage = {\n  name: 'parseComplete',\n  length: 5,\n}\n\nexport const bindComplete: BackendMessage = {\n  name: 'bindComplete',\n  length: 5,\n}\n\nexport const closeComplete: BackendMessage = {\n  name: 'closeComplete',\n  length: 5,\n}\n\nexport const noData: BackendMessage = {\n  name: 'noData',\n  length: 5,\n}\n\nexport const portalSuspended: BackendMessage = {\n  name: 'portalSuspended',\n  length: 5,\n}\n\nexport const replicationStart: BackendMessage = {\n  name: 'replicationStart',\n  length: 4,\n}\n\nexport const emptyQuery: BackendMessage = {\n  name: 'emptyQuery',\n  length: 4,\n}\n\nexport const copyDone: BackendMessage = {\n  name: 'copyDone',\n  length: 4,\n}\n\nexport class AuthenticationOk implements BackendMessage {\n  public readonly name = 'authenticationOk'\n  constructor(public readonly length: number) {}\n}\n\nexport class AuthenticationCleartextPassword implements BackendMessage {\n  public readonly name = 'authenticationCleartextPassword'\n  constructor(public readonly length: number) {}\n}\n\nexport class AuthenticationMD5Password implements BackendMessage {\n  public readonly name = 'authenticationMD5Password'\n  constructor(\n    public readonly length: number,\n    public readonly salt: Uint8Array,\n  ) {}\n}\n\nexport class AuthenticationSASL implements BackendMessage {\n  public readonly name = 'authenticationSASL'\n  constructor(\n    public readonly length: number,\n    public readonly mechanisms: string[],\n  ) {}\n}\n\nexport class AuthenticationSASLContinue implements BackendMessage {\n  public readonly name = 'authenticationSASLContinue'\n  constructor(\n    public readonly length: number,\n    public readonly data: string,\n  ) {}\n}\n\nexport class AuthenticationSASLFinal implements BackendMessage {\n  public readonly name = 'authenticationSASLFinal'\n  constructor(\n    public readonly length: number,\n    public readonly data: string,\n  ) {}\n}\n\nexport type AuthenticationMessage =\n  | AuthenticationOk\n  | AuthenticationCleartextPassword\n  | AuthenticationMD5Password\n  | AuthenticationSASL\n  | AuthenticationSASLContinue\n  | AuthenticationSASLFinal\n\ninterface NoticeOrError {\n  message: string | undefined\n  severity: string | undefined\n  code: string | undefined\n  detail: string | undefined\n  hint: string | undefined\n  position: string | undefined\n  internalPosition: string | undefined\n  internalQuery: string | undefined\n  where: string | undefined\n  schema: string | undefined\n  table: string | undefined\n  column: string | undefined\n  dataType: string | undefined\n  constraint: string | undefined\n  file: string | undefined\n  line: string | undefined\n  routine: string | undefined\n}\n\nexport class DatabaseError extends Error implements NoticeOrError {\n  public severity: string | undefined\n  public code: string | undefined\n  public detail: string | undefined\n  public hint: string | undefined\n  public position: string | undefined\n  public internalPosition: string | undefined\n  public internalQuery: string | undefined\n  public where: string | undefined\n  public schema: string | undefined\n  public table: string | undefined\n  public column: string | undefined\n  public dataType: string | undefined\n  public constraint: string | undefined\n  public file: string | undefined\n  public line: string | undefined\n  public routine: string | undefined\n  constructor(\n    message: string,\n    public readonly length: number,\n    public readonly name: MessageName,\n  ) {\n    super(message)\n  }\n}\n\nexport class CopyDataMessage implements BackendMessage {\n  public readonly name = 'copyData'\n  constructor(\n    public readonly length: number,\n    public readonly chunk: Uint8Array,\n  ) {}\n}\n\nexport class CopyResponse implements BackendMessage {\n  public readonly columnTypes: number[]\n  constructor(\n    public readonly length: number,\n    public readonly name: MessageName,\n    public readonly binary: boolean,\n    columnCount: number,\n  ) {\n    this.columnTypes = new Array(columnCount)\n  }\n}\n\nexport class Field {\n  constructor(\n    public readonly name: string,\n    public readonly tableID: number,\n    public readonly columnID: number,\n    public readonly dataTypeID: number,\n    public readonly dataTypeSize: number,\n    public readonly dataTypeModifier: number,\n    public readonly format: Mode,\n  ) {}\n}\n\nexport class RowDescriptionMessage implements BackendMessage {\n  public readonly name: MessageName = 'rowDescription'\n  public readonly fields: Field[]\n  constructor(\n    public readonly length: number,\n    public readonly fieldCount: number,\n  ) {\n    this.fields = new Array(this.fieldCount)\n  }\n}\n\nexport class ParameterDescriptionMessage implements BackendMessage {\n  public readonly name: MessageName = 'parameterDescription'\n  public readonly dataTypeIDs: number[]\n  constructor(\n    public readonly length: number,\n    public readonly parameterCount: number,\n  ) {\n    this.dataTypeIDs = new Array(this.parameterCount)\n  }\n}\n\nexport class ParameterStatusMessage implements BackendMessage {\n  public readonly name: MessageName = 'parameterStatus'\n  constructor(\n    public readonly length: number,\n    public readonly parameterName: string,\n    public readonly parameterValue: string,\n  ) {}\n}\n\nexport class BackendKeyDataMessage implements BackendMessage {\n  public readonly name: MessageName = 'backendKeyData'\n  constructor(\n    public readonly length: number,\n    public readonly processID: number,\n    public readonly secretKey: number,\n  ) {}\n}\n\nexport class NotificationResponseMessage implements BackendMessage {\n  public readonly name: MessageName = 'notification'\n  constructor(\n    public readonly length: number,\n    public readonly processId: number,\n    public readonly channel: string,\n    public readonly payload: string,\n  ) {}\n}\n\nexport class ReadyForQueryMessage implements BackendMessage {\n  public readonly name: MessageName = 'readyForQuery'\n  constructor(\n    public readonly length: number,\n    public readonly status: string,\n  ) {}\n}\n\nexport class CommandCompleteMessage implements BackendMessage {\n  public readonly name: MessageName = 'commandComplete'\n  constructor(\n    public readonly length: number,\n    public readonly text: string,\n  ) {}\n}\n\nexport class DataRowMessage implements BackendMessage {\n  public readonly fieldCount: number\n  public readonly name: MessageName = 'dataRow'\n  constructor(\n    public length: number,\n    public fields: (string | null)[],\n  ) {\n    this.fieldCount = fields.length\n  }\n}\n\nexport class NoticeMessage implements BackendMessage, NoticeOrError {\n  constructor(\n    public readonly length: number,\n    public readonly message: string | undefined,\n  ) {}\n  public readonly name = 'notice'\n  public severity: string | undefined\n  public code: string | undefined\n  public detail: string | undefined\n  public hint: string | undefined\n  public position: string | undefined\n  public internalPosition: string | undefined\n  public internalQuery: string | undefined\n  public where: string | undefined\n  public schema: string | undefined\n  public table: string | undefined\n  public column: string | undefined\n  public dataType: string | undefined\n  public constraint: string | undefined\n  public file: string | undefined\n  public line: string | undefined\n  public routine: string | undefined\n}\n"],"mappings":"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","names":["messages_exports","__export","AuthenticationCleartextPassword","AuthenticationMD5Password","AuthenticationOk","AuthenticationSASL","AuthenticationSASLContinue","AuthenticationSASLFinal","BackendKeyDataMessage","CommandCompleteMessage","CopyDataMessage","CopyResponse","DataRowMessage","DatabaseError","Field","NoticeMessage","NotificationResponseMessage","ParameterDescriptionMessage","ParameterStatusMessage","ReadyForQueryMessage","RowDescriptionMessage","bindComplete","closeComplete","copyDone","emptyQuery","noData","parseComplete","portalSuspended","replicationStart","length","salt","mechanisms","data","message","name","chunk","binary","columnCount","tableID","columnID","dataTypeID","dataTypeSize","dataTypeModifier","format","fieldCount","parameterCount","parameterName","parameterValue","processID","secretKey","processId","channel","payload","status","text","fields"]}
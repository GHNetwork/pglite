import{b as oe,e as s,f as h,g as f,h as p,i as le,j as b}from"./chunk-LXLR7NCL.js";var wn={};oe(wn,{ABSTIME:()=>kt,ACLITEM:()=>Wt,BIT:()=>_t,BOOL:()=>we,BPCHAR:()=>ze,BYTEA:()=>Ae,CHAR:()=>It,CID:()=>Dt,CIDR:()=>Ct,CIRCLE:()=>Ut,DATE:()=>Ye,FLOAT4:()=>He,FLOAT8:()=>Qe,GTSVECTOR:()=>on,INET:()=>Ft,INT2:()=>ve,INT4:()=>je,INT8:()=>Ie,INTERVAL:()=>vt,JSON:()=>Be,JSONB:()=>Je,MACADDR:()=>Gt,MACADDR8:()=>$t,MONEY:()=>Ot,NUMERIC:()=>Qt,OID:()=>_e,PATH:()=>Rt,PG_DEPENDENCIES:()=>rn,PG_LSN:()=>tn,PG_NDISTINCT:()=>nn,PG_NODE_TREE:()=>Tt,POLYGON:()=>Et,REFCURSOR:()=>zt,REGCLASS:()=>Jt,REGCONFIG:()=>ln,REGDICTIONARY:()=>un,REGNAMESPACE:()=>cn,REGOPER:()=>Yt,REGOPERATOR:()=>Kt,REGPROC:()=>Bt,REGPROCEDURE:()=>qt,REGROLE:()=>dn,REGTYPE:()=>Xt,RELTIME:()=>Lt,SMGR:()=>Mt,TEXT:()=>W,TID:()=>xt,TIME:()=>Vt,TIMESTAMP:()=>Ke,TIMESTAMPTZ:()=>xe,TIMETZ:()=>jt,TINTERVAL:()=>Nt,TSQUERY:()=>an,TSVECTOR:()=>sn,TXID_SNAPSHOT:()=>en,UUID:()=>Zt,VARBIT:()=>Ht,VARCHAR:()=>qe,XID:()=>St,XML:()=>Pt,arrayParser:()=>gn,arraySerializer:()=>Ze,parseType:()=>ue,parsers:()=>pn,serializers:()=>fn,types:()=>Xe});b();var wt=globalThis.JSON.parse,At=globalThis.JSON.stringify,we=16,Ae=17,It=18,Ie=20,ve=21,je=23,Bt=24,W=25,_e=26,xt=27,St=28,Dt=29,Be=114,Pt=142,Tt=194,Mt=210,Rt=602,Et=604,Ct=650,He=700,Qe=701,kt=702,Lt=703,Nt=704,Ut=718,$t=774,Ot=790,Gt=829,Ft=869,Wt=1033,ze=1042,qe=1043,Ye=1082,Vt=1083,Ke=1114,xe=1184,vt=1186,jt=1266,_t=1560,Ht=1562,Qt=1700,zt=1790,qt=2202,Yt=2203,Kt=2204,Jt=2205,Xt=2206,Zt=2950,en=2970,tn=3220,nn=3361,rn=3402,sn=3614,an=3615,on=3642,ln=3734,un=3769,Je=3802,cn=4089,dn=4096,Xe={string:{to:W,from:[W,qe,ze],serialize:t=>{if(typeof t=="string")return t;if(typeof t=="number")return t.toString();throw new Error("Invalid input for string type")},parse:t=>t},number:{to:0,from:[ve,je,_e,He,Qe],serialize:t=>t.toString(),parse:t=>+t},bigint:{to:Ie,from:[Ie],serialize:t=>t.toString(),parse:t=>{let e=BigInt(t);return e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER?e:Number(e)}},json:{to:Be,from:[Be,Je],serialize:t=>typeof t=="string"?t:At(t),parse:t=>wt(t)},boolean:{to:we,from:[we],serialize:t=>{if(typeof t!="boolean")throw new Error("Invalid input for boolean type");return t?"t":"f"},parse:t=>t==="t"},date:{to:xe,from:[Ye,Ke,xe],serialize:t=>{if(typeof t=="string")return t;if(typeof t=="number")return new Date(t).toISOString();if(t instanceof Date)return t.toISOString();throw new Error("Invalid input for date type")},parse:t=>new Date(t)},bytea:{to:Ae,from:[Ae],serialize:t=>{if(!(t instanceof Uint8Array))throw new Error("Invalid input for bytea type");return"\\x"+Array.from(t).map(e=>e.toString(16).padStart(2,"0")).join("")},parse:t=>{let e=t.slice(2);return Uint8Array.from({length:e.length/2},(n,r)=>parseInt(e.substring(r*2,(r+1)*2),16))}}},Se=mn(Xe),pn=Se.parsers,fn=Se.serializers;function ue(t,e,n){if(t===null)return null;let r=n?.[e]??Se.parsers[e];return r?r(t,e):t}function mn(t){return Object.keys(t).reduce(({parsers:e,serializers:n},r)=>{let{to:a,from:i,serialize:o,parse:d}=t[r];return n[a]=o,n[r]=o,e[r]=d,Array.isArray(i)?i.forEach(u=>{e[u]=d,n[u]=o}):(e[i]=d,n[i]=o),{parsers:e,serializers:n}},{parsers:{},serializers:{}})}var yn=/\\/g,bn=/"/g;function hn(t){return t.replace(yn,"\\\\").replace(bn,'\\"')}function Ze(t,e,n){if(Array.isArray(t)===!1)return t;if(!t.length)return"{}";let r=t[0],a=n===1020?";":",";return Array.isArray(r)?`{${t.map(i=>Ze(i,e,n)).join(a)}}`:`{${t.map(i=>(i===void 0&&(i=null),i===null?"null":'"'+hn(e?e(i):i.toString())+'"')).join(a)}}`}var ge={i:0,char:null,str:"",quoted:!1,last:0,p:null};function gn(t,e,n){return ge.i=ge.last=0,et(ge,t,e,n)[0]}function et(t,e,n,r){let a=[],i=r===1020?";":",";for(;t.i<e.length;t.i++){if(t.char=e[t.i],t.quoted)t.char==="\\"?t.str+=e[++t.i]:t.char==='"'?(a.push(n?n(t.str):t.str),t.str="",t.quoted=e[t.i+1]==='"',t.last=t.i+2):t.str+=t.char;else if(t.char==='"')t.quoted=!0;else if(t.char==="{")t.last=++t.i,a.push(et(t,e,n,r));else if(t.char==="}"){t.quoted=!1,t.last<t.i&&a.push(n?n(e.slice(t.last,t.i)):e.slice(t.last,t.i)),t.last=t.i+1;break}else t.char===i&&t.p!=="}"&&t.p!=='"'&&(a.push(n?n(e.slice(t.last,t.i)):e.slice(t.last,t.i)),t.last=t.i+1);t.p=t.char}return t.last<t.i&&a.push(n?n(e.slice(t.last,t.i+1)):e.slice(t.last,t.i+1)),a}var Bn={};oe(Bn,{parseDescribeStatementResults:()=>De,parseResults:()=>An});b();function An(t,e,n,r){let a=[],i={rows:[],fields:[]},o=0,d={...e,...n?.parsers};return t.forEach(u=>{switch(u.name){case"rowDescription":{let B=u;i.fields=B.fields.map(P=>({name:P.name,dataTypeID:P.dataTypeID}));break}case"dataRow":{if(!i)break;let B=u;n?.rowMode==="array"?i.rows.push(B.fields.map((P,C)=>ue(P,i.fields[C].dataTypeID,d))):i.rows.push(Object.fromEntries(B.fields.map((P,C)=>[i.fields[C].name,ue(P,i.fields[C].dataTypeID,d)])));break}case"commandComplete":{o+=In(u),a.push({...i,affectedRows:o,...r?{blob:r}:{}}),i={rows:[],fields:[]};break}}}),a.length===0&&a.push({affectedRows:0,rows:[],fields:[]}),a}function In(t){let e=t.text.split(" ");switch(e[0]){case"INSERT":return parseInt(e[2],10);case"UPDATE":case"DELETE":case"COPY":case"MERGE":return parseInt(e[1],10);default:return 0}}function De(t){let e=t.find(n=>n.name==="parameterDescription");return e?e.dataTypeIDs:[]}var Ne={};oe(Ne,{AuthenticationCleartextPassword:()=>v,AuthenticationMD5Password:()=>j,AuthenticationOk:()=>V,AuthenticationSASL:()=>_,AuthenticationSASLContinue:()=>H,AuthenticationSASLFinal:()=>Q,BackendKeyDataMessage:()=>Z,CommandCompleteMessage:()=>ne,CopyDataMessage:()=>z,CopyResponse:()=>q,DataRowMessage:()=>re,DatabaseError:()=>k,Field:()=>Y,NoticeMessage:()=>se,NotificationResponseMessage:()=>ee,ParameterDescriptionMessage:()=>J,ParameterStatusMessage:()=>X,ReadyForQueryMessage:()=>te,RowDescriptionMessage:()=>K,bindComplete:()=>Te,closeComplete:()=>Me,copyDone:()=>Le,emptyQuery:()=>ke,noData:()=>Re,parseComplete:()=>Pe,portalSuspended:()=>Ee,replicationStart:()=>Ce});b();var Pe={name:"parseComplete",length:5},Te={name:"bindComplete",length:5},Me={name:"closeComplete",length:5},Re={name:"noData",length:5},Ee={name:"portalSuspended",length:5},Ce={name:"replicationStart",length:4},ke={name:"emptyQuery",length:4},Le={name:"copyDone",length:4},V=class{constructor(e){this.length=e;this.name="authenticationOk"}},v=class{constructor(e){this.length=e;this.name="authenticationCleartextPassword"}},j=class{constructor(e,n){this.length=e;this.salt=n;this.name="authenticationMD5Password"}},_=class{constructor(e,n){this.length=e;this.mechanisms=n;this.name="authenticationSASL"}},H=class{constructor(e,n){this.length=e;this.data=n;this.name="authenticationSASLContinue"}},Q=class{constructor(e,n){this.length=e;this.data=n;this.name="authenticationSASLFinal"}},k=class extends Error{constructor(n,r,a){super(n);this.length=r;this.name=a}},z=class{constructor(e,n){this.length=e;this.chunk=n;this.name="copyData"}},q=class{constructor(e,n,r,a){this.length=e;this.name=n;this.binary=r;this.columnTypes=new Array(a)}},Y=class{constructor(e,n,r,a,i,o,d){this.name=e;this.tableID=n;this.columnID=r;this.dataTypeID=a;this.dataTypeSize=i;this.dataTypeModifier=o;this.format=d}},K=class{constructor(e,n){this.length=e;this.fieldCount=n;this.name="rowDescription";this.fields=new Array(this.fieldCount)}},J=class{constructor(e,n){this.length=e;this.parameterCount=n;this.name="parameterDescription";this.dataTypeIDs=new Array(this.parameterCount)}},X=class{constructor(e,n,r){this.length=e;this.parameterName=n;this.parameterValue=r;this.name="parameterStatus"}},Z=class{constructor(e,n,r){this.length=e;this.processID=n;this.secretKey=r;this.name="backendKeyData"}},ee=class{constructor(e,n,r,a){this.length=e;this.processId=n;this.channel=r;this.payload=a;this.name="notification"}},te=class{constructor(e,n){this.length=e;this.status=n;this.name="readyForQuery"}},ne=class{constructor(e,n){this.length=e;this.text=n;this.name="commandComplete"}},re=class{constructor(e,n){this.length=e;this.fields=n;this.name="dataRow";this.fieldCount=n.length}},se=class{constructor(e,n){this.length=e;this.message=n;this.name="notice"}};var qn={};oe(qn,{Parser:()=>be,messages:()=>Ne,serialize:()=>G});b();b();b();b();function L(t){let e=t.length;for(let n=t.length-1;n>=0;n--){let r=t.charCodeAt(n);r>127&&r<=2047?e++:r>2047&&r<=65535&&(e+=2),r>=56320&&r<=57343&&n--}return e}var g,w,U,de,$,x,ce,N,tt,E=class{constructor(e=256){this.size=e;h(this,x);h(this,g);h(this,w,5);h(this,U,!1);h(this,de,new TextEncoder);h(this,$,0);f(this,g,p(this,x,ce).call(this,e))}addInt32(e){return p(this,x,N).call(this,4),s(this,g).setInt32(s(this,w),e,s(this,U)),f(this,w,s(this,w)+4),this}addInt16(e){return p(this,x,N).call(this,2),s(this,g).setInt16(s(this,w),e,s(this,U)),f(this,w,s(this,w)+2),this}addCString(e){return e&&this.addString(e),p(this,x,N).call(this,1),s(this,g).setUint8(s(this,w),0),le(this,w)._++,this}addString(e=""){let n=L(e);return p(this,x,N).call(this,n),s(this,de).encodeInto(e,new Uint8Array(s(this,g).buffer,s(this,w))),f(this,w,s(this,w)+n),this}add(e){let n=e instanceof Uint8Array?e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength):e;return p(this,x,N).call(this,n.byteLength),new Uint8Array(s(this,g).buffer).set(new Uint8Array(n),s(this,w)),f(this,w,s(this,w)+n.byteLength),this}flush(e){let n=p(this,x,tt).call(this,e);return f(this,w,5),f(this,g,p(this,x,ce).call(this,this.size)),new Uint8Array(n)}};g=new WeakMap,w=new WeakMap,U=new WeakMap,de=new WeakMap,$=new WeakMap,x=new WeakSet,ce=function(e){return new DataView(new ArrayBuffer(e))},N=function(e){if(s(this,g).byteLength-s(this,w)<e){let r=s(this,g).buffer,a=r.byteLength+(r.byteLength>>1)+e;f(this,g,p(this,x,ce).call(this,a)),new Uint8Array(s(this,g).buffer).set(new Uint8Array(r))}},tt=function(e){if(e){s(this,g).setUint8(s(this,$),e);let n=s(this,w)-(s(this,$)+1);s(this,g).setInt32(s(this,$)+1,n,s(this,U))}return s(this,g).buffer.slice(e?0:5,s(this,w))};var y=new E,xn=t=>{y.addInt16(3).addInt16(0);for(let r of Object.keys(t))y.addCString(r).addCString(t[r]);y.addCString("client_encoding").addCString("UTF8");let e=y.addCString("").flush(),n=e.byteLength+4;return new E().addInt32(n).add(e).flush()},Sn=()=>{let t=new DataView(new ArrayBuffer(8));return t.setInt32(0,8,!1),t.setInt32(4,80877103,!1),new Uint8Array(t.buffer)},Dn=t=>y.addCString(t).flush(112),Pn=(t,e)=>(y.addCString(t).addInt32(L(e)).addString(e),y.flush(112)),Tn=t=>y.addString(t).flush(112),Mn=t=>y.addCString(t).flush(81),Rn=[],En=t=>{let e=t.name??"";e.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",e,e.length),console.error("This can cause conflicts and silent errors executing queries"));let n=y.addCString(e).addCString(t.text).addInt16(t.types?.length??0);return t.types?.forEach(r=>n.addInt32(r)),y.flush(80)},O=new E;var Cn=(t,e)=>{for(let n=0;n<t.length;n++){let r=e?e(t[n],n):t[n];if(r===null)y.addInt16(0),O.addInt32(-1);else if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)){let a=ArrayBuffer.isView(r)?r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength):r;y.addInt16(1),O.addInt32(a.byteLength),O.add(a)}else y.addInt16(0),O.addInt32(L(r)),O.addString(r)}},kn=(t={})=>{let e=t.portal??"",n=t.statement??"",r=t.binary??!1,a=t.values??Rn,i=a.length;return y.addCString(e).addCString(n),y.addInt16(i),Cn(a,t.valueMapper),y.addInt16(i),y.add(O.flush()),y.addInt16(r?1:0),y.flush(66)},Ln=new Uint8Array([69,0,0,0,9,0,0,0,0,0]),Nn=t=>{if(!t||!t.portal&&!t.rows)return Ln;let e=t.portal??"",n=t.rows??0,r=L(e),a=4+r+1+4,i=new DataView(new ArrayBuffer(1+a));return i.setUint8(0,69),i.setInt32(1,a,!1),new TextEncoder().encodeInto(e,new Uint8Array(i.buffer,5)),i.setUint8(r+5,0),i.setUint32(i.byteLength-4,n,!1),new Uint8Array(i.buffer)},Un=(t,e)=>{let n=new DataView(new ArrayBuffer(16));return n.setInt32(0,16,!1),n.setInt16(4,1234,!1),n.setInt16(6,5678,!1),n.setInt32(8,t,!1),n.setInt32(12,e,!1),new Uint8Array(n.buffer)},Ue=(t,e)=>{let n=new E;return n.addCString(e),n.flush(t)},$n=y.addCString("P").flush(68),On=y.addCString("S").flush(68),Gn=t=>t.name?Ue(68,`${t.type}${t.name??""}`):t.type==="P"?$n:On,Fn=t=>{let e=`${t.type}${t.name??""}`;return Ue(67,e)},Wn=t=>y.add(t).flush(100),Vn=t=>Ue(102,t),pe=t=>new Uint8Array([t,0,0,0,4]),vn=pe(72),jn=pe(83),_n=pe(88),Hn=pe(99),G={startup:xn,password:Dn,requestSsl:Sn,sendSASLInitialResponseMessage:Pn,sendSCRAMClientFinalMessage:Tn,query:Mn,parse:En,bind:kn,execute:Nn,describe:Gn,close:Fn,flush:()=>vn,sync:()=>jn,end:()=>_n,copyData:Wn,copyDone:()=>Hn,copyFail:Vn,cancel:Un};b();b();var $e={text:0,binary:1};b();var Qn=new ArrayBuffer(0),R,A,me,ye,ae,fe=class{constructor(e=0){h(this,R,new DataView(Qn));h(this,A);h(this,me,"utf-8");h(this,ye,new TextDecoder(s(this,me)));h(this,ae,!1);f(this,A,e)}setBuffer(e,n){f(this,A,e),f(this,R,new DataView(n))}int16(){let e=s(this,R).getInt16(s(this,A),s(this,ae));return f(this,A,s(this,A)+2),e}byte(){let e=s(this,R).getUint8(s(this,A));return le(this,A)._++,e}int32(){let e=s(this,R).getInt32(s(this,A),s(this,ae));return f(this,A,s(this,A)+4),e}string(e){return s(this,ye).decode(this.bytes(e))}cstring(){let e=s(this,A),n=e;for(;s(this,R).getUint8(n++)!==0;);let r=this.string(n-e-1);return f(this,A,n),r}bytes(e){let n=s(this,R).buffer.slice(s(this,A),s(this,A)+e);return f(this,A,s(this,A)+e),new Uint8Array(n)}};R=new WeakMap,A=new WeakMap,me=new WeakMap,ye=new WeakMap,ae=new WeakMap;var Oe=1,zn=4,nt=Oe+zn,rt=new ArrayBuffer(0);var I,S,D,l,c,st,at,it,ot,lt,ut,ct,Ge,dt,pt,ft,mt,yt,bt,ht,gt,Fe,be=class{constructor(){h(this,c);h(this,I,new DataView(rt));h(this,S,0);h(this,D,0);h(this,l,new fe)}parse(e,n){p(this,c,st).call(this,ArrayBuffer.isView(e)?e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength):e);let r=s(this,D)+s(this,S),a=s(this,D);for(;a+nt<=r;){let i=s(this,I).getUint8(a),o=s(this,I).getUint32(a+Oe,!1),d=Oe+o;if(d+a<=r&&o>0){let u=p(this,c,at).call(this,a+nt,i,o,s(this,I).buffer);n(u),a+=d}else break}a===r?(f(this,I,new DataView(rt)),f(this,S,0),f(this,D,0)):(f(this,S,r-a),f(this,D,a))}};I=new WeakMap,S=new WeakMap,D=new WeakMap,l=new WeakMap,c=new WeakSet,st=function(e){if(s(this,S)>0){let n=s(this,S)+e.byteLength;if(n+s(this,D)>s(this,I).byteLength){let a;if(n<=s(this,I).byteLength&&s(this,D)>=s(this,S))a=s(this,I).buffer;else{let i=s(this,I).byteLength*2;for(;n>=i;)i*=2;a=new ArrayBuffer(i)}new Uint8Array(a).set(new Uint8Array(s(this,I).buffer,s(this,D),s(this,S))),f(this,I,new DataView(a)),f(this,D,0)}new Uint8Array(s(this,I).buffer).set(new Uint8Array(e),s(this,D)+s(this,S)),f(this,S,n)}else f(this,I,new DataView(e)),f(this,D,0),f(this,S,e.byteLength)},at=function(e,n,r,a){switch(n){case 50:return Te;case 49:return Pe;case 51:return Me;case 110:return Re;case 115:return Ee;case 99:return Le;case 87:return Ce;case 73:return ke;case 68:return p(this,c,yt).call(this,e,r,a);case 67:return p(this,c,ot).call(this,e,r,a);case 90:return p(this,c,it).call(this,e,r,a);case 65:return p(this,c,dt).call(this,e,r,a);case 82:return p(this,c,gt).call(this,e,r,a);case 83:return p(this,c,bt).call(this,e,r,a);case 75:return p(this,c,ht).call(this,e,r,a);case 69:return p(this,c,Fe).call(this,e,r,a,"error");case 78:return p(this,c,Fe).call(this,e,r,a,"notice");case 84:return p(this,c,pt).call(this,e,r,a);case 116:return p(this,c,mt).call(this,e,r,a);case 71:return p(this,c,ut).call(this,e,r,a);case 72:return p(this,c,ct).call(this,e,r,a);case 100:return p(this,c,lt).call(this,e,r,a);default:return new k("received invalid response: "+n.toString(16),r,"error")}},it=function(e,n,r){s(this,l).setBuffer(e,r);let a=s(this,l).string(1);return new te(n,a)},ot=function(e,n,r){s(this,l).setBuffer(e,r);let a=s(this,l).cstring();return new ne(n,a)},lt=function(e,n,r){let a=r.slice(e,e+(n-4));return new z(n,new Uint8Array(a))},ut=function(e,n,r){return p(this,c,Ge).call(this,e,n,r,"copyInResponse")},ct=function(e,n,r){return p(this,c,Ge).call(this,e,n,r,"copyOutResponse")},Ge=function(e,n,r,a){s(this,l).setBuffer(e,r);let i=s(this,l).byte()!==0,o=s(this,l).int16(),d=new q(n,a,i,o);for(let u=0;u<o;u++)d.columnTypes[u]=s(this,l).int16();return d},dt=function(e,n,r){s(this,l).setBuffer(e,r);let a=s(this,l).int32(),i=s(this,l).cstring(),o=s(this,l).cstring();return new ee(n,a,i,o)},pt=function(e,n,r){s(this,l).setBuffer(e,r);let a=s(this,l).int16(),i=new K(n,a);for(let o=0;o<a;o++)i.fields[o]=p(this,c,ft).call(this);return i},ft=function(){let e=s(this,l).cstring(),n=s(this,l).int32(),r=s(this,l).int16(),a=s(this,l).int32(),i=s(this,l).int16(),o=s(this,l).int32(),d=s(this,l).int16()===0?$e.text:$e.binary;return new Y(e,n,r,a,i,o,d)},mt=function(e,n,r){s(this,l).setBuffer(e,r);let a=s(this,l).int16(),i=new J(n,a);for(let o=0;o<a;o++)i.dataTypeIDs[o]=s(this,l).int32();return i},yt=function(e,n,r){s(this,l).setBuffer(e,r);let a=s(this,l).int16(),i=new Array(a);for(let o=0;o<a;o++){let d=s(this,l).int32();i[o]=d===-1?null:s(this,l).string(d)}return new re(n,i)},bt=function(e,n,r){s(this,l).setBuffer(e,r);let a=s(this,l).cstring(),i=s(this,l).cstring();return new X(n,a,i)},ht=function(e,n,r){s(this,l).setBuffer(e,r);let a=s(this,l).int32(),i=s(this,l).int32();return new Z(n,a,i)},gt=function(e,n,r){s(this,l).setBuffer(e,r);let a=s(this,l).int32();switch(a){case 0:return new V(n);case 3:return new v(n);case 5:return new j(n,s(this,l).bytes(4));case 10:{let i=[];for(;;){let o=s(this,l).cstring();if(o.length===0)return new _(n,i);i.push(o)}}case 11:return new H(n,s(this,l).string(n-8));case 12:return new Q(n,s(this,l).string(n-8));default:throw new Error("Unknown authenticationOk message type "+a)}},Fe=function(e,n,r,a){s(this,l).setBuffer(e,r);let i={},o=s(this,l).string(1);for(;o!=="\0";)i[o]=s(this,l).cstring(),o=s(this,l).string(1);let d=i.M,u=a==="notice"?new se(n,d):new k(d,n,a);return u.severity=i.S,u.code=i.C,u.detail=i.D,u.hint=i.H,u.position=i.P,u.internalPosition=i.p,u.internalQuery=i.q,u.where=i.W,u.schema=i.s,u.table=i.t,u.column=i.c,u.dataType=i.d,u.constraint=i.n,u.file=i.F,u.line=i.L,u.routine=i.R,u};b();var m=()=>typeof performance<"u"&&performance.now?performance.now():Date.now(),he=t=>`+${(m()-t).toFixed(1)}ms`,Ve=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ie,We;async function Er(){if(Ve){console.debug("[PGliteInternal][wasm] startWasmDownload: skipped (Node.js environment)");return}if(ie){console.debug("[PGliteInternal][wasm] startWasmDownload: already in progress, reusing existing promise");return}We=m();let t=new URL("./pglite.wasm",import.meta.url);console.debug(`[PGliteInternal][wasm] startWasmDownload: initiating fetch from ${t.href}`),ie=fetch(t).then(e=>{let n=he(We);return console.info(`[PGliteInternal][wasm] ${n} fetch completed (status=${e.status}, ok=${e.ok}, type=${e.type})`),e.ok||console.error(`[PGliteInternal][wasm] ${n} fetch FAILED: HTTP ${e.status} ${e.statusText}`),e}).catch(e=>{let n=he(We);throw console.error(`[PGliteInternal][wasm] ${n} fetch FAILED with error:`,e),e})}var F;async function Cr(t,e){let n=m(),r=()=>he(n);if(console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: entry (hasModule=${!!e}, hasCachedModule=${!!F})`),e||F){console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: using ${e?"provided":"cached"} module, calling WebAssembly.instantiate()`);let i=m(),o=await WebAssembly.instantiate(e||F,t);return console.info(`[PGliteInternal][wasm] ${r()} instantiateWasm: WebAssembly.instantiate() completed (took ${(m()-i).toFixed(1)}ms)`),{instance:o,module:e||F}}let a=new URL("./pglite.wasm",import.meta.url);if(console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: no cached module, will load from ${a.href}`),Ve){console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: Node.js path - reading file`);let i=await import("fs/promises"),o=m(),d=await i.readFile(a);console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: file read complete (${d.byteLength} bytes, took ${(m()-o).toFixed(1)}ms)`);let u=m(),{module:B,instance:P}=await WebAssembly.instantiate(d,t);return console.info(`[PGliteInternal][wasm] ${r()} instantiateWasm: WebAssembly.instantiate() completed (took ${(m()-u).toFixed(1)}ms)`),F=B,console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: cached module for future use`),{instance:P,module:B}}else{console.info(`[PGliteInternal][wasm] ${r()} instantiateWasm: browser path (NMT: using ArrayBuffer instantiation)`),ie?console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: reusing existing download promise`):(console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: no existing download promise, starting fetch`),ie=fetch(a)),console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: awaiting wasmDownloadPromise...`);let i=m(),o=await ie;if(console.info(`[PGliteInternal][wasm] ${r()} instantiateWasm: wasmDownloadPromise resolved (status=${o.status}, ok=${o.ok}, waited ${(m()-i).toFixed(1)}ms)`),!o.ok)throw console.error(`[PGliteInternal][wasm] ${r()} instantiateWasm: WASM fetch failed with HTTP ${o.status}`),new Error(`WASM fetch failed with HTTP ${o.status}`);console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: converting response to ArrayBuffer...`);let d=m(),u=await o.arrayBuffer();console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: arrayBuffer() complete (${u.byteLength} bytes, took ${(m()-d).toFixed(1)}ms)`),console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: calling WebAssembly.instantiate(buffer)...`);let B=m(),{module:P,instance:C}=await WebAssembly.instantiate(u,t);return console.info(`[PGliteInternal][wasm] ${r()} instantiateWasm: WebAssembly.instantiate() completed (took ${(m()-B).toFixed(1)}ms)`),F=P,console.debug(`[PGliteInternal][wasm] ${r()} instantiateWasm: cached module for future use`),console.info(`[PGliteInternal][wasm] ${r()} instantiateWasm: COMPLETE (total ${(m()-n).toFixed(1)}ms)`),{instance:C,module:P}}}async function kr(){let t=m(),e=()=>he(t),n=new URL("./pglite.data",import.meta.url);if(console.debug(`[PGliteInternal][fsBundle] ${e()} getFsBundle: entry (url=${n.href})`),Ve){console.debug(`[PGliteInternal][fsBundle] ${e()} getFsBundle: Node.js path - reading file`);let r=await import("fs/promises"),a=m(),i=await r.readFile(n);return console.info(`[PGliteInternal][fsBundle] ${e()} getFsBundle: file read complete (${i.byteLength} bytes, took ${(m()-a).toFixed(1)}ms)`),i.buffer}else{console.debug(`[PGliteInternal][fsBundle] ${e()} getFsBundle: browser path - fetching`);let r=m(),a=await fetch(n);console.debug(`[PGliteInternal][fsBundle] ${e()} getFsBundle: fetch complete (status=${a.status}, ok=${a.ok}, took ${(m()-r).toFixed(1)}ms)`),a.ok||console.error(`[PGliteInternal][fsBundle] ${e()} getFsBundle: fetch FAILED with HTTP ${a.status}`);let i=m(),o=await a.arrayBuffer();return console.info(`[PGliteInternal][fsBundle] ${e()} getFsBundle: arrayBuffer() complete (${o.byteLength} bytes, took ${(m()-i).toFixed(1)}ms)`),console.info(`[PGliteInternal][fsBundle] ${e()} getFsBundle: COMPLETE (total ${(m()-t).toFixed(1)}ms)`),o}}var Lr=()=>{if(globalThis.crypto?.randomUUID)return globalThis.crypto.randomUUID();let t=new Uint8Array(16);if(globalThis.crypto?.getRandomValues)globalThis.crypto.getRandomValues(t);else for(let n=0;n<t.length;n++)t[n]=Math.floor(Math.random()*256);t[6]=t[6]&15|64,t[8]=t[8]&63|128;let e=[];return t.forEach(n=>{e.push(n.toString(16).padStart(2,"0"))}),e.slice(0,4).join("")+"-"+e.slice(4,6).join("")+"-"+e.slice(6,8).join("")+"-"+e.slice(8,10).join("")+"-"+e.slice(10).join("")};async function Nr(t,e,n,r){if(!n||n.length===0)return e;r=r??t;let a=[];try{await t.execProtocol(G.parse({text:e}),{syncToFs:!1}),a.push(...(await t.execProtocol(G.describe({type:"S"}),{syncToFs:!1})).messages)}finally{a.push(...(await t.execProtocol(G.sync(),{syncToFs:!1})).messages)}let i=De(a),o=e.replace(/\$([0-9]+)/g,(u,B)=>"%"+B+"L");return(await r.query(`SELECT format($1, ${n.map((u,B)=>`$${B+2}`).join(", ")}) as query`,[o,...n],{paramTypes:[W,...i]})).rows[0].query}function Ur(t){let e,n=!1,r=async()=>{if(!e){n=!1;return}n=!0;let{args:a,resolve:i,reject:o}=e;e=void 0;try{let d=await t(...a);i(d)}catch(d){o(d)}finally{r()}};return async(...a)=>{e&&e.resolve(void 0);let i=new Promise((o,d)=>{e={args:a,resolve:o,reject:d}});return n||r(),i}}function $r(t){let e;return t.startsWith('"')&&t.endsWith('"')?e=t.substring(1,t.length-1):e=t.toLowerCase(),e}export{pn as a,fn as b,Ze as c,gn as d,wn as e,An as f,De as g,Bn as h,G as i,k as j,ee as k,ne as l,se as m,Ne as n,be as o,qn as p,Ve as q,Er as r,Cr as s,kr as t,Lr as u,Nr as v,Ur as w,$r as x};
//# sourceMappingURL=chunk-YMWB5NPP.js.map